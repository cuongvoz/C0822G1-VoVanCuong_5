<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Contract</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="css.css">
    <style>
        * {
            font-family: Arial, Helvetica, sans-serif;
        }

        .bgimg{
            background-image: url("https://i.ytimg.com/vi/2fCoOx9W4NQ/maxresdefault.jpg");
            height: 100%;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        .imgcard:hover {

            cursor: pointer;

        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>
<body>
<div>
    <div class="row modalbg">
        <ul class="nav justify-content-center">
            <li  class="nav-item " style="margin-left: 100px">
                <img src="https://furamavietnam.com/wp-content/uploads/2018/10/logo.png" height="100" width="75">
            </li> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <li  class="nav-item " style="margin-left: 100px">
                <div class="card" style="width: 8rem;height: 6rem">
                    <img src="https://truevaluevietnam.com/wp-content/uploads/2015/10/TA_brand_logo.png" height="55"
                         class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Card title</h5>
                    </div>
                </div>
            </li>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <li  style="margin-left: 100px"  class="nav-item ">
                <p style="display: inline">
                    103 - 105 Vo Nguyen Giap Street, Khue <br>
                    My Ward, Ngu Hanh Son District, Danang <br>
                    City, Vietnam <br>
                    7,0 km from Danang <Airport></Airport>
                </p>
            </li> &nbsp;&nbsp;

        </ul>
    </div>
</div>
<div class="row">
    <nav class="navbar navbar-light" style="background-color: teal">
        <div class="container-fluid" style="position: relative">
            <a class="navbar-brand"
               href="http://localhost:63342/CaseStudy_html/home.html?_ijt=29kqig0n57r4m0sicgf13nniqs">Home</a>

            <button class="btn btn-light" style="position: absolute;left: 100px" data-bs-toggle="modal"
                    data-bs-target="#addmodal">Tạo Hợp Đồng
            </button>
            <form action="/contract/find" method="get" style="position:absolute ;top: 1px;right: 30px"
                  class="d-flex">
                <input class="form-control me-2" type="search" name="facility" placeholder="Dịch Vụ"
                       aria-label="Search">
                <input class="form-control me-2" type="search" name="customer" placeholder="Khách Hàng"
                       aria-label="Search">
                <input class="form-control me-2" type="search" name="employee" placeholder="Nhân Viên"
                       aria-label="Search">
                <button class="btn btn-outline-light" type="submit">Tìm</button>
            </form>
        </div>
    </nav>
</div>
<div class="bgimg">
    <br> <br> <br>
    <table class="table" style="backdrop-filter: blur(10px);color: aliceblue;font-weight: bold">
        <thead>
        <tr>
            <th>#</th>
            <th>Dịch Vụ</th>
            <th>Nhân Viên</th>
            <th>Khách Hàng</th>
            <th>Ngày Bắt Đầu</th>
            <th>Ngày Kết Thúc</th>
            <th>Tiền Đặt Cọc</th>
            <th>Tổng Tiền</th>
            <th>Các Dịch Vụ Đi Kèm</th>
        </tr>
        </thead>
        <tbody id="my-body">
        <tr>
            <th>1</th>
            <th>Villa Beach Front</th>
            <th>Nguyễn Văn An</th>
            <th>Nguyễn Thị Hào</th>
            <th>2020-12-08</th>
            <th>2020-12-08</th>
            <th>0đ</th>
            <th>9000000đ</th>
            <th>
                <button class="btn btn-outline-light"  data-bs-toggle="modal" data-bs-target="#editModal" >+</button>
                <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#viewAttachFacility" onclick="showListAttachFacility(${data[i].id})">Danh Sách Dịch Vụ Đi Kèm</button>
            </th>
        </tr>
        <tr>
            <th>2</th>
            <th>House Princess 01</th>
            <th>Lê Văn Bình</th>
            <th>Phạm Xuân Diệu</th>
            <th>2020-07-14</th>
            <th>2020-07-21</th>
            <th>200000đ</th>
            <th>15000000đ</th>
            <th>
                <button class="btn btn-outline-light"  data-bs-toggle="modal" data-bs-target="#editModal" >+</button>
                <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#viewAttachFacility" onclick="showListAttachFacility(${data[i].id})">Danh Sách Dịch Vụ Đi Kèm</button>
            </th>
        </tr>
        <tr>
            <th>3</th>
            <th>Room Twin 01</th>
            <th>Hồ Thị Yến</th>
            <th>Trương Đình Nghệ</th>
            <th>2021-03-15</th>
            <th>2021-03-17</th>
            <th>50000đ</th>
            <th>13000000đ</th>
            <th>
                <button class="btn btn-outline-light"  data-bs-toggle="modal" data-bs-target="#editModal" >+</button>
                <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#viewAttachFacility" onclick="showListAttachFacility(${data[i].id})">Danh Sách Dịch Vụ Đi Kèm</button>
            </th>
        </tr>
        <tr>
            <th>4</th>
            <th>Villa No Beach Front</th>
            <th>Võ Công Toản</th>
            <th>Dương Văn Quan</th>
            <th>2021-01-14</th>
            <th>2021-01-18</th>
            <th>100000đ</th>
            <th>100000000đ</th>
            <th>
                <button class="btn btn-outline-light"  data-bs-toggle="modal" data-bs-target="#editModal" >+</button>
                <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#viewAttachFacility" onclick="showListAttachFacility(${data[i].id})">Danh Sách Dịch Vụ Đi Kèm</button>
            </th>
        </tr>
        <tr>
            <th>5</th>
            <th>House Princess 02</th>
            <th>Nguyễn Bỉnh Phát</th>
            <th>Hoàng Trần Nhi Nhi</th>
            <th>2021-07-14</th>
            <th>2021-07-15</th>
            <th>0đ</th>
            <th>9000000đ</th>
            <th>
                <button class="btn btn-outline-light"  data-bs-toggle="modal" data-bs-target="#editModal" >+</button>
                <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#viewAttachFacility" onclick="showListAttachFacility(${data[i].id})">Danh Sách Dịch Vụ Đi Kèm</button>
            </th>
        </tr>
        </tbody>
    </table>
    <div>
        <div style="background: cadetblue;margin-top: 80px" class="row">
            <div class="col-1" style="background: cadetblue"></div>
            <div class="col-3" style="background: #bcbebf">
                <h1 style="color: darkkhaki;text-align: center;margin-top: 30px">How to Get to Us</h1>
                <p style="text-align: center;text-align: left">Furama is a premier base for exploring one of<br> Asia's most
                    exciting new destinations. Just a<br> short drive
                    from Danang lay four UNESCO-listed<br> World Heritage Sites:</p>
                <h1><a href="#" class="btn" style="color: white;background: teal"><i class="fa-sharp fa-solid fa-location-dot"> &ensp;View On Map</i></a>
                </h1>
                <h2 style="color: darkkhaki">Local Places</h2>
                <br>
                <p><b>1. The former imperial city of HUE &ensp;&ensp;&ensp;&ensp;&ensp;&nbsp;&nbsp;2 hours</b></p>
                <hr>
                <p><b>2. The ancient Hoi An &ensp;&ensp;&ensp; &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&nbsp;&nbsp;30
                    minutes</b></p>
                <hr>
                <p><b>3. Champa civilization, My Son &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;90 minutes</b></p>
                <hr>
                <p><b>4. Phong Nha Caves &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;
                    3 hours</b></p>
            </div>
            <div class="col-3" style="margin-top: 30px;text-align: center">
                <a style="color: #5c636a;text-decoration: none" href="">News</a>
                <br>
                <br>
                <a style="color: #5c636a;text-decoration: none" href="">Rack rate</a>
                <br>
                <br>
                <a style="color: #5c636a;text-decoration: none" href="">Lifestyle Bog</a>
                <br>
                <br>
                <a style="color: #5c636a;text-decoration: none" href="">Work with us</a>
                <br>
                <br>
                <a style="color: #5c636a;text-decoration: none" href="">Contact us</a>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <div style="margin-left: 130px"><img
                        src="https://furamavietnam.com/wp-content/uploads/2019/02/Ariyana-Tourism-Complex-02-2.png"
                        width="760" height="90"></div>
            </div>
            <div class="col-4" style="margin-top: 40px">
                <h5 style="color: darkkhaki;">Contact US</h5>
                <br>
                <p style="font-size: 17px">
                    <i class="fa-sharp fa-solid fa-location-dot"></i>
                    103 - 105 Vo Nguyen Giap Street, Khue My Ward, Ngu Hanh Son<br> District, Danang City, Vietnam<br>
                    Tel.: 84-236-3847 333/888 * Fax: 84-236-3847 666<br>
                    Email: reservation@furamavietnam.com *<a href="https://furamavietnam.com/undefined/" style="color: black;text-decoration: none">www.furamavietnam.com</a> <br> GDS Codes: Amadeus-GD DADFUR,
                    Galileo/Apollo-GD 16236<br>, Sabre-GD 032771, Worldspan- GD DADFU
                </p>
                <hr>
                <a href="https://www.facebook.com/furamaresort/"><img
                        src="https://furamavietnam.com/wp-content/uploads/2019/06/incon-Facbook-1.png"></a>
                <a href="https://www.instagram.com/furama_resort_and_villas/?hl=vi"><img src="https://furamavietnam.com/wp-content/uploads/2019/06/social-ins.png"></a>
                <a href="https://www.youtube.com/user/furamaresortvietnam/featured"><img src="https://furamavietnam.com/wp-content/uploads/2021/10/social-youtube.png"></a>
                <br>
                <br>
                <br>
                <br>
                <p style="margin-left: 300px">© 2018 Furama Resort Danang </p>
            </div>
        </div>
    </div>
</div>
<div class="modal" tabindex="-1" id="addDetail">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thêm dịch vụ đi kèm <i class="fa-sharp fa-solid fa-user"></i></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/contract/add}" method="post" th:object="${contractDetail}">

                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Dịch Vụ</label>
                        <div class="col-sm-10">
                            <select th:field="*{attachFacility}" id="attachFacilityAdd" class="form-control">
                                <option th:each="facility : ${listAttach}" th:text="${facility.name}"
                                        th:value="${facility.id}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Số Lượng</label>
                        <input type="hidden" th:field="*{contract}" id="contractIdAdd">
                        <div class="col-sm-10">
                            <input type="number" id="quantityAdd" class="form-control" th:field="*{quantity}">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button type="button" onclick="addContractDetail()" class="btn btn-primary">Thêm</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal" tabindex="-1" id="viewAttachFacility">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Dịch Vụ Đi Kèm Của Hợp Đồng Này</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <input type="hidden" th:value="${modal}" id="modalCheck">
            <div class="modal-body">
                <table class="table">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Dịch Vụ</th>
                        <th>Đơn Giá</th>
                        <th>Xuất</th>
                        <th>Trạng Thái</th>
                        <th>Số Lượng</th>
                        <th>Tổng Tiền</th>
                    </tr>
                    </thead>
                    <tbody id="tableAttachFacilityNew">
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Thoát</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" tabindex="-1" id="addmodal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Tạo Hợp Đồng <i class="fa-sharp fa-solid fa-user"></i></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/contract/addContract}" method="post" th:object="${contract}">
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Ngày Bắt Đầu</label>
                        <div class="col-sm-10">
                            <input type="date" class="form-control" id="addStartDate" th:field="*{startDate}">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Ngày Kết Thúc</label>
                        <div class="col-sm-10">
                            <input type="date" class="form-control" id="addEndDate" th:field="*{endDate}">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Tiền Gửi</label>
                        <div class="col-sm-10">
                            <input type="number" class="form-control" onchange="validate()" id="addDeposit" th:field="*{deposit}">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Tổng Tiền</label>
                        <div class="col-sm-10">
                            <input type="number" class="form-control" readonly id="tongTien">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Khách Hàng</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="addCutomer" th:field="*{customer}">
                                <option th:each="customer : ${customerList}" th:text="${customer.name}"
                                        th:value="${customer.id}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Nhân Viên</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="addEmployee" th:field="*{employee}">
                                <option th:each="employee : ${employeeList}" th:text="${employee.name}"
                                        th:value="${employee.id}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Dịch Vụ</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="addFacility" th:field="*{facility}">
                                <option th:each="facility : ${facilityList}" th:text="${facility.name}"
                                        th:value="${facility.id}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button type="button" onclick="addContract()" class="btn btn-primary">Xác Nhận</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal" tabindex="-1" id="editModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thay Đổi Hợp Đồng <i class="fa-sharp fa-solid fa-user"></i></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/contract/addContract}" method="post" th:object="${contract}">
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Ngày Bắt Đầu</label>
                        <div class="col-sm-10">
                            <input type="date" class="form-control" id="startNewDate" th:field="*{startDate}">
                            <input type="hidden" class="form-control" id="idEdit" th:field="*{id}">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Ngày Kết Thúc</label>
                        <div class="col-sm-10">
                            <input type="date" class="form-control" id="endNewEdit" th:field="*{endDate}">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Tiền Gửi</label>
                        <div class="col-sm-10">
                            <input type="number" id="depositEdit" class="form-control" th:field="*{deposit}">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Tổng Tiền</label>
                        <div class="col-sm-10">
                            <input type="number" class="form-control" readonly id="tongTienEdit">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Khách Hàng</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="customerEdit" th:field="*{customer}">
                                <option th:each="customer : ${customerList}" th:text="${customer.name}"
                                        th:value="${customer.id}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Nhân Viên</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="employeeEdit" th:field="*{employee}">
                                <option th:each="employee : ${employeeList}" th:text="${employee.name}"
                                        th:value="${employee.id}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Dịch Vụ</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="facilityEdit" th:field="*{facility}">
                                <option th:each="facility : ${facilityList}" th:text="${facility.name}"
                                        th:value="${facility.id}"></option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">Dịch Vụ Đi Kèm</label>
                        <div class="col-sm-10">
                            <button type="button" class="btn btn-primary" onclick="addAttach()" data-bs-toggle="modal"
                                    data-bs-target="#addDetail">+
                            </button>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button type="button" onclick="updateContract2()" class="btn btn-primary">Xác Nhận</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>
  function validate() {
      let deposit = document.getElementById("")
      if (deposit < 1) {
          $('#addDeposit').style.borderColor = "red";
      } else {
          $('#addDeposit').style.borderColor = "green";
      }
  }
    function updateContract2() {
        let id = $('#idEdit').val();
        let startDate = $('#startNewDate').val();
        let endDate = $('#endNewEdit').val();
        let deposit = $('#depositEdit').val();
        let facilitiy = $('#facilityEdit').val();
        let employee = $('#employeeEdit').val();
        let customer = $('#customerEdit').val();
        let contract = {
            id: id,
            startDate: startDate,
            endDate: endDate,
            deposit: deposit,
            customer: customer,
            employee: employee,
            facility: facilitiy
        }
        $.ajax({
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            type: 'POST',
            data: JSON.stringify(contract),
            url: 'contracts/update',
            success: function () {
                $('#editModal').modal('hide')
                init()

            }

        })
    }

    init()

    function init() {
        $.ajax({
            type: 'GET',
            url: '/contracts',
            success: function (data) {
                let table = ''
                for (let i = 0; i < data.length; i++) {
                    table += `
                 <tr>
                 <th>${i + 1}</th>
                 <th>${data[i].facility.name}</th>
                 <th>${data[i].employee.name}</th>
                 <th>${data[i].customer.name}</th>
                 <th>${data[i].startDate}</th>
                 <th>${data[i].endDate}</th>
                 <th>${data[i].deposit}</th>
                 <th>${data[i].total}</th>
                 <th>
                 <button class="btn btn-outline-light"  data-bs-toggle="modal" data-bs-target="#editModal" onclick="updateContract(${data[i].id}, '${data[i].startDate}', '${data[i].endDate}', ${data[i].deposit}, ${data[i].employee.id}, ${data[i].customer.id}, ${data[i].facility.id},${data[i].total})">+</button>
                 <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#viewAttachFacility" onclick="showListAttachFacility(${data[i].id})">Danh Sách Dịch Vụ Đi Kèm</button>
                 </th>

                 `
                }
                $('#my-body').html(table)
            }
        })
    }

    function addContractDetail() {
        // id, startDate, endDate, deposit, employee, customer, facility,total


        let contractId = $('#contractIdAdd').val();
        let quantity = $('#quantityAdd').val();
        let attachId = $('#attachFacilityAdd').val();
        let contractDetail = {
            contractId: contractId,
            quantity: quantity,
            attachId: attachId
        }
        $.ajax({
            headers: {
                'Accect': 'application/json',
                'Content-Type': 'application/json'
            },
            type: 'POST',
            data: JSON.stringify(contractDetail),
            url: '/contracts/createDetail',
            success: function () {
                $('#addDetail').modal('hide')
                init()
                $(document).ready(
                    function () {
                        $('#editModal').appendTo('body').modal('show')
                    }
                )
            }
        })

    }

    function changeMoney(money) {
        document.getElementById("tongTienEdit").value = money;
    }

    function addContract() {
        let start = $('#addStartDate').val();
        let end = $('#addEndDate').val();
        let deposit = $('#addDeposit').val();
        let customer = $('#addCutomer').val();
        let employee = $('#addEmployee').val();
        let facility = $('#addFacility').val();
        let contract = {
            startDate: start,
            endDate: end,
            deposit: deposit,
            employee: employee,
            customer: customer,
            facility: facility
        };
        $.ajax({
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            type: 'POST',
            data: JSON.stringify(contract),
            url: "/contracts/create",
            success: function () {
                $('#addmodal').modal('hide')
                init()
            }
        })

    }

    function showListAttachFacility(id) {
        $.ajax({
            type: "GET",
            url: "/contracts/view/" + id,
            success: function (data) {
                let table = ''
                let x = 0;
                for (let i = 0; i < data.length; i++) {
                    x += data[i].total;
                    table += `
                    <tr>
                         <th>${i + 1}</th>
                        <th>${data[i].name}</th>
                        <th>${data[i].cost}</th>
                        <th>${data[i].unit}</th>
                        <th>${data[i].status}</th>
                        <th>${data[i].quantity}</th>
                        <th>${data[i].total}</th>
                    </tr>`
                }
                table += `</tr>
                 <tr>
                 <th colspan="4">Tổng Thành Tiền:</th>
                 <th></th>
                 <th></th>
                 <th>${x}</th>
                 </tr>
                    `

                $('#tableAttachFacilityNew').html(table)
            }
        })
    }

    function updateContract(id, startDate, endDate, deposit, employee, customer, facility, total) {
        document.getElementById("idEdit").value = id;
        document.getElementById("startNewDate").value = startDate;
        document.getElementById("endNewEdit").value = endDate;
        document.getElementById("depositEdit").value = deposit;
        document.getElementById("employeeEdit").value = employee;
        document.getElementById("customerEdit").value = customer;
        document.getElementById("facilityEdit").value = facility;
        document.getElementById("tongTienEdit").value = total;
    }

    function addAttach() {
        let id = document.getElementById("idEdit").value;
        document.getElementById("contractIdAdd").value = id;
    }

    let modal = document.getElementById("modalCheck").value;
    if (modal == "true") {
        $(document).ready(
            function () {
                $('#viewAttachFacility').appendTo('body').modal('show')
            }
        )
    }
</script>
</html>
